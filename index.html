<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ElectionDashboard</title>
  <meta name="description" content="Live verkiezingsdashboard met kaarten, grafieken en tabellen." />

  <!-- CSP: pas aan als je andere bronnen gebruikt -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src  'self' https://cdn.tailwindcss.com https://unpkg.com https://cdn.jsdelivr.net;
    style-src   'self' 'unsafe-inline' https://unpkg.com https://fonts.googleapis.com;
    font-src    'self' https://fonts.gstatic.com data:;
    img-src     'self' data: blob: https://*.basemaps.cartocdn.com;
    connect-src 'self' https://raw.githubusercontent.com;
    upgrade-insecure-requests;
  ">

  <!-- (Optioneel) Tailwind voor de utility-klassen die je JS in de DOM injecteert -->
  <script src="https://cdn.tailwindcss.com" defer></script>

  <!-- Leaflet (kaart) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>

  <!-- Chart.js (grafieken in overzicht) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>

  <!-- Jouw styles -->
  <link rel="stylesheet" href="assets/css/electiondashboard.css" />

  <!-- Kleine fallback voor tabs als je CSS het niet regelt -->
  <style>
    .tab-content{display:none}
    .tab-content.active{display:block}
    .tab-button.active{border-bottom:2px solid #4f46e5}
    .hidden{display:none}
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <noscript>Dit dashboard heeft JavaScript nodig om te werken.</noscript>

  <header class="bg-white shadow">
    <div class="max-w-6xl mx-auto px-4 py-6">
      <h1 class="text-2xl font-bold">ElectionDashboard</h1>
      <p class="text-slate-600">Live inzichten voor verkiezingsuitslagen</p>
    </div>
  </header>

  <!-- Wrapper die je JS gebruikt voor foutmeldingen -->
  <div class="container max-w-6xl mx-auto px-4 py-6">
    <!-- FILTERBALK (hoofd) -->
    <section id="main-filter-container" class="bg-white rounded-lg shadow p-4 mb-6">
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3 items-end">
        <div>
          <label for="election-select" class="block text-sm font-medium text-slate-700">Verkiezing</label>
          <select id="election-select" class="mt-1 w-full border rounded p-2"></select>
        </div>

        <div id="party-filter-container">
          <label for="party-select" class="block text-sm font-medium text-slate-700">Partij</label>
          <select id="party-select" class="mt-1 w-full border rounded p-2">
            <option value="overall">Toon winnaar per buurt</option>
          </select>
        </div>

        <div class="lg:col-span-1">
          <button id="resetFiltersBtn" type="button" class="w-full border rounded p-2 bg-slate-100 hover:bg-slate-200">
            Reset filters
          </button>
        </div>
      </div>
    </section>

    <!-- FILTERBALK (analyse-tab) -->
    <section id="analysis-filter-container" class="bg-white rounded-lg shadow p-4 mb-6 hidden">
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3 items-end">
        <div>
          <label for="analysis-election-select" class="block text-sm font-medium text-slate-700">Analyse-scenario</label>
          <select id="analysis-election-select" class="mt-1 w-full border rounded p-2"></select>
        </div>
      </div>
    </section>

    <!-- TABS -->
    <nav class="mb-4 border-b">
      <div class="flex gap-4">
        <button class="tab-button py-2 px-3 active" data-tab="overzicht" type="button">Overzicht</button>
        <button class="tab-button py-2 px-3" data-tab="kaart" type="button">Kaart</button>
        <button class="tab-button py-2 px-3" data-tab="zetels" type="button">Zetelverdeling</button>
        <button class="tab-button py-2 px-3" data-tab="analyse" type="button">Analyse</button>
      </div>
    </nav>

    <!-- TAB: OVERZICHT -->
    <section id="overzicht" class="tab-content active">
      <!-- Je JS vult dit paneel (canvas wordt dynamisch gemaakt) -->
    </section>

    <!-- TAB: KAART -->
    <section id="kaart" class="tab-content">
      <!-- Je JS injecteert hier de kaart-HTML en maakt #map-inner-container aan -->
    </section>

    <!-- TAB: ZETELVERDELING -->
    <section id="zetels" class="tab-content">
      <!-- Je JS schrijft hier de zetelverdeling-HTML -->
    </section>

    <!-- TAB: ANALYSE -->
    <section id="analyse" class="tab-content">
      <!-- Je JS schrijft hier de analyse (historisch of 2026) -->
    </section>
  </div>

  <footer class="py-8 text-center text-sm text-slate-500">
    &copy; <span id="year"></span> Mark Eijbaard â€” ElectionDashboard
  </footer>

  <!-- Jouw script als laatste -->
  <script src="assets/js/electiondashboard.js" defer></script>
  <script defer>
    // Jaar in footer
    document.addEventListener('DOMContentLoaded', () => {
      const y = document.getElementById('year');
      if (y) y.textContent = new Date().getFullYear();

      // Simpele tab-actie: jouw JS gebruikt .tab-button en .tab-content
      const tabs = document.querySelectorAll('.tab-button');
      const panels = document.querySelectorAll('.tab-content');
      tabs.forEach(btn => {
        btn.addEventListener('click', () => {
          tabs.forEach(b => b.classList.remove('active'));
          panels.forEach(p => p.classList.remove('active'));
          btn.classList.add('active');
          const target = btn.getAttribute('data-tab');
          document.getElementById(target)?.classList.add('active');
        });
      });
    });
  </script>
</body>
</html>
